{% extends "base.html" %}
{% block title %}
Your Homepage
{% endblock %}

{% block footer %}
<script type="text/javascript" src="https://oss.sheetjs.com/sheetjs/xlsx.full.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.17.1/dist/bootstrap-table.min.css">
<script src="https://unpkg.com/bootstrap-table@1.17.1/dist/bootstrap-table.min.js"></script>
{% endblock %}

{% block content %}
{% if user.is_authenticated %}
<div class="container-fluid">
    <nav>
        <h1>Welcome to Finance</h1>
    </nav>

    <h2>Hi {{ user.username }}</h2>

    <div>
        <button id="download-csv" class="btn btn-primary">Download CSV</button>
        <button id="download-xlsx" class="btn btn-primary">Download XLSX</button>
        <button id="select-all" class="btn btn-primary">Select all</button>
        <button id="deselect-all" class="btn btn-primary">Deselect all</button>
        <a class="btn btn-danger" href="{% url 'main:recommendation-create' %}" role="button">Add new entry</a>
    </div>
    {% csrf_token %}

    <div id="example-table"></div>

    <div class="table-responsive">
        <table class="table table-bordered border-primary caption-top">
            <caption>List of users</caption>
            <thead>
                <tr>
                    <th scope="col">ID in Table</th>
                    <th scope="col">Edit</th>
                    <th scope="col">Starting Date</th>
                    <th scope="col">Ending Date</th>
                    <th scope="col">Time Horizon</th>
                    <th scope="col">Positioning</th>
                    <th scope="col">Position</th>
                    <th scope="col">Outperformance</th>
                    <th scope="col">BBG Ticker 1</th>
                    <th scope="col">BBG Ticker 2</th>
                    <th scope="col">Pitch</th>
                </tr>
            </thead>
            <tbody>
                {% for rec in recommendations %}
                <tr>
                    <th scope="row">{{ rec.id }}</th>
                    <td><a class="btn btn-primary" href="{% url 'main:recommendation-update' rec.id %}" role="button">Update</a></td>
                    <td>{{ rec.starting_date }}</td>
                    <td>{{ rec.ending_date }}</td>
                    <td>{{ rec.positioning }}</td>
                    <td>{{ rec.position }}</td>
                    <td>{{ rec.description }}</td>
                    <td>{{ rec.outperformance }}</td>
                    <td>{{ rec.time_horizon }}</td>
                    <td>{{ rec.bloomberg_ticker_1 }}</td>
                    <td>{{ rec.bloomberg_ticker_2 }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

</script>

</div>
{% else %}

{% endif %}

{% endblock %}
